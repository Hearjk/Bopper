<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bopper Web App - Beat-Synced GIFs</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="app.css">
</head>
<body>
    <div class="background-grid"></div>

    <main>
        <header>
            <a href="index.html" class="back-link">&larr; Back</a>
            <h1 class="logo">BOPPER</h1>
            <span class="badge">WEB</span>
        </header>

        <!-- GIF Display -->
        <div class="gif-container">
            <div class="gif-frame" id="gifFrame">
                <img id="gifDisplay" src="" alt="GIF Preview">
                <div class="placeholder" id="placeholder">
                    <span>Upload a GIF to start</span>
                </div>
            </div>
        </div>

        <!-- BPM Display -->
        <div class="bpm-display">
            <span class="bpm-value" id="bpmValue">120</span>
            <span class="bpm-label">BPM</span>
        </div>

        <!-- BPM Controls -->
        <div class="bpm-controls">
            <div class="control-group">
                <label>Set BPM</label>
                <div class="input-row">
                    <button class="adjust-btn" onclick="adjustBPM(-1)">-</button>
                    <input type="number" id="bpmInput" value="120" min="20" max="300" onchange="setBPM(this.value)">
                    <button class="adjust-btn" onclick="adjustBPM(1)">+</button>
                </div>
            </div>

            <div class="control-group">
                <label>Tap Tempo</label>
                <button class="tap-btn" id="tapBtn" onclick="tapTempo()">
                    TAP
                </button>
            </div>

            <div class="control-group">
                <label>Mic Detection</label>
                <button class="mic-btn" id="micBtn" onclick="toggleMic()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                        <line x1="12" y1="19" x2="12" y2="23"/>
                        <line x1="8" y1="23" x2="16" y2="23"/>
                    </svg>
                    <span id="micStatus">Start</span>
                </button>
            </div>
        </div>

        <!-- Effects Controls -->
        <div class="effects-controls">
            <button class="effect-btn" id="pulseBtn" onclick="toggleEffect('pulse')">PULSE</button>
            <button class="effect-btn" id="shakeBtn" onclick="toggleEffect('shake')">SHAKE</button>
            <select id="filterSelect" onchange="setFilter(this.value)">
                <option value="none">No Filter</option>
                <option value="invert">Invert</option>
                <option value="sepia">Sepia</option>
                <option value="cyber">Cyber</option>
                <option value="vapor">Vaporwave</option>
                <option value="matrix">Matrix</option>
            </select>
        </div>

        <!-- Playback Controls -->
        <div class="playback-controls">
            <button class="play-btn" id="playBtn" onclick="togglePlayback()">
                <svg id="playIcon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <polygon points="5,3 19,12 5,21"/>
                </svg>
                <svg id="pauseIcon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display:none">
                    <rect x="6" y="4" width="4" height="16"/>
                    <rect x="14" y="4" width="4" height="16"/>
                </svg>
            </button>
            <div class="speed-control">
                <label>Speed</label>
                <select id="speedSelect" onchange="setSpeed(this.value)">
                    <option value="1">Normal</option>
                    <option value="2">1/2</option>
                    <option value="4">1/4</option>
                    <option value="8">1/8</option>
                </select>
            </div>
        </div>

        <!-- GIF Upload -->
        <div class="upload-section">
            <input type="file" id="gifInput" accept="image/gif" onchange="loadGIF(this.files[0])" hidden>
            <button class="upload-btn" onclick="document.getElementById('gifInput').click()">
                Upload GIF
            </button>
            <div class="preset-gifs">
                <span class="preset-label">Or try:</span>
                <button class="preset-btn" onclick="loadPresetGIF('dance')">Dance</button>
                <button class="preset-btn" onclick="loadPresetGIF('cat')">Cat</button>
                <button class="preset-btn" onclick="loadPresetGIF('nyan')">Nyan</button>
            </div>
        </div>

        <footer>
            <p>Bopper Web App - Works on desktop & mobile</p>
        </footer>
    </main>

    <script src="app.js"></script>
</body>
</html>
